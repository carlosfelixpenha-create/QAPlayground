<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>QAPlayground - Formulário 3</title>
  <link rel="stylesheet" href="style_global.css" />
  <link rel="stylesheet" href="login.css" />
</head>
<body>
  <div class="login-content">
    <h1>Formulário 3 - Novos Campos</h1>
    <form onsubmit="executarFormulario3(event)" class="form-container">

      <!-- Upload PDF -->
      <div class="field-container">
        <label for="arquivoPdf">Upload de Arquivo (PDF):</label>
        <input type="file" id="arquivoPdf" accept="application/pdf" required />
      </div>

      <!-- Upload DOCX -->
      <div class="field-container">
        <label for="arquivoDocx">Upload de Arquivo (DOCX):</label>
        <input type="file" id="arquivoDocx" accept=".docx,application/vnd.openxmlformats-officedocument.wordprocessingml.document" required />
      </div>

      <!-- Upload JPG -->
      <div class="field-container">
        <label for="arquivoJpg">Upload de Arquivo (JPG):</label>
        <input type="file" id="arquivoJpg" accept="image/jpeg" required />
      </div>

      <!-- Select País / Estado / Cidade -->
      <div class="field-container">
        <label for="pais">País:</label>
        <select id="pais" required>
          <option value="">Selecione...</option>
          <option value="brasil">Brasil</option>
          <option value="portugal">Portugal</option>
          <option value="eua">Estados Unidos</option>
        </select>

        <label for="estado">Estado:</label>
        <select id="estado" required>
          <option value="">Selecione...</option>
        </select>

        <label for="cidade">Cidade:</label>
        <select id="cidade" required>
          <option value="">Selecione...</option>
        </select>
      </div>

      <div class="button-group">
        <button type="button" class="requisitos" onclick="location.href='formulario-3-requisitos.html'">Requisitos</button>
        <button type="button" onclick="location.href='home.html'">Voltar</button>
        <button type="submit">Enviar</button>
      </div>
    </form>
  </div>

  <script>
    const dadosLocalizacao = {
      brasil: {
        pr: { label: "Paraná", cidades: ["Curitiba", "Matinhos"] },
        sp: { label: "São Paulo", cidades: ["São Paulo", "Campinas", "Santos"] },
        rj: { label: "Rio de Janeiro", cidades: ["Rio de Janeiro", "Niterói"] }
      },
      portugal: {
        lisboa: { label: "Lisboa", cidades: ["Lisboa", "Sintra"] },
        porto: { label: "Porto", cidades: ["Porto", "Gaia"] }
      },
      eua: {
        ny: { label: "Nova Iorque", cidades: ["Nova Iorque", "Buffalo"] },
        ca: { label: "Califórnia", cidades: ["Los Angeles", "San Francisco"] }
      }
    };

    document.addEventListener("DOMContentLoaded", () => {
      const paisSelect = document.getElementById("pais");
      const estadoSelect = document.getElementById("estado");
      const cidadeSelect = document.getElementById("cidade");

      paisSelect.addEventListener("change", () => {
        const pais = paisSelect.value;
        estadoSelect.innerHTML = '<option value="">Selecione...</option>';
        cidadeSelect.innerHTML = '<option value="">Selecione...</option>';

        if (pais && dadosLocalizacao[pais]) {
          Object.entries(dadosLocalizacao[pais]).forEach(([estadoKey, estadoObj]) => {
            const opt = document.createElement("option");
            opt.value = estadoKey;
            opt.textContent = estadoObj.label;
            estadoSelect.appendChild(opt);
          });
        }
      });

      estadoSelect.addEventListener("change", () => {
        const pais = paisSelect.value;
        const estado = estadoSelect.value;
        cidadeSelect.innerHTML = '<option value="">Selecione...</option>';

        if (pais && estado && dadosLocalizacao[pais][estado]) {
          dadosLocalizacao[pais][estado].cidades.forEach((cidade) => {
            const opt = document.createElement("option");
            opt.value = cidade.toLowerCase().replace(/\s+/g, "-");
            opt.textContent = cidade;
            cidadeSelect.appendChild(opt);
          });
        }
      });
    });

    function executarFormulario3(event) {
      event.preventDefault();

      const arquivoPdf = document.getElementById('arquivoPdf').files[0];
      const arquivoDocx = document.getElementById('arquivoDocx').files[0];
      const arquivoJpg = document.getElementById('arquivoJpg').files[0];

      if (!arquivoPdf || !arquivoDocx || !arquivoJpg) {
        alert("Todos os arquivos (PDF, DOCX e JPG) devem ser selecionados.");
        return;
      }

      if (arquivoPdf.type !== "application/pdf") {
        alert("Somente arquivos PDF são permitidos.");
        return;
      }
      if (arquivoDocx.type !== "application/vnd.openxmlformats-officedocument.wordprocessingml.document") {
        alert("Somente arquivos DOCX são permitidos.");
        return;
      }
      if (arquivoJpg.type !== "image/jpeg") {
        alert("Somente arquivos JPG são permitidos.");
        return;
      }

      const paisSelect = document.getElementById('pais');
      const estadoSelect = document.getElementById('estado');
      const cidadeSelect = document.getElementById('cidade');

      if (!paisSelect.value || !estadoSelect.value || !cidadeSelect.value) {
        alert("Preencha corretamente os campos de País, Estado e Cidade.");
        return;
      }

      // Usamos o texto visível das opções
      const pais = paisSelect.options[paisSelect.selectedIndex].text;
      const estado = estadoSelect.options[estadoSelect.selectedIndex].text;
      const cidade = cidadeSelect.options[cidadeSelect.selectedIndex].text;

      alert(
        `Formulário enviado com sucesso!\n\n` +
        `PDF: ${arquivoPdf.name}\n` +
        `DOCX: ${arquivoDocx.name}\n` +
        `JPG: ${arquivoJpg.name}\n` +
        `País: ${pais}\n` +
        `Estado: ${estado}\n` +
        `Cidade: ${cidade}`
      );
    }
  </script>
   <!-- Marca d'água -->
  <div class="marca-dagua esquerda"></div>
  <div class="marca-dagua direita"></div>
</body>
</html>